h2. Общее описание

После создания сайта, его индексации и измерения всех нужных вам параметров необходимо выложить на хостинг специальный скрипт, отображающий ссылки системы. Сам скрипт уникален для каждого сайта и зависит от его параметров. Для его получения нужно пройти небольшой мастер и загрузить полученные файлы.

Сам мастер вызывается посредством нажатия на ссылку *Файлы на хостинг* в верхнем меню. В форме вы можете выбрать следующие параметры:
* *Сайт* - тот сайт, для которого генерируется скрипт.
* *Папка доставщика ссылок* - та самая директория *llm-client*. Если вы ее все еще не переименовали и система установлена в корневой директории, то скорее всего это будет URL вида: http://ваш_сайт.ру/llm-client/. Обратите внимание - это папка находится на том домене, на который был куплен скрипт. В принципе, вводить в это поле ничего не нужно - надо всего лишь нажать на кнопку справа, что бы проверить правильность ввода и то - корректно ли скрипт подхватил переменную из файла конфигурации.

После нажатия на кнопку получения файлов вам будет дан пошаговый план действий по вставке кода на ваш сайт. Вставка на различные движки (CMS) была описана в разделе *Инсталляция*.

h2. Куда вставлять код ссылок

Вопрос сложный и одновременно простой. Любая поисковая система ищет все ссылки внутри тэга BODY, т.е. вставлять их нужно именно туда. Других советов, кроме того, что неплохо бы разнести ссылки по разным частям страницы - нет.

h2. return_links

Так называется функция отображения ссылок. Если вызвать ее без параметров, то она выдаст *ВСЕ* ссылки текущей страницы. Если вы хотите показать их по частям, то для показа каждой части нужно указать ее количество ссылок в скобочках. Если вы имели дело с системой Sape.Ru, то процесс абсолютно идентичен.

h2. Отладка

Если по каким-то причинам присвоенные странице ссылки не отображаются - не надо паниковать. Первая и самая вероятная причина - не прошло достаточное время, после которого скрипт запросит обновление с сервера. Такое по умолчанию происходит раз в час. Но если случилось страшное и новые ссылки не показываются достаточно долго, то для выявления причины нужно проделать один нехитрый процесс:

* Заходим по фтп на сайт и в директории *llm-XXXXXXXXXXXXXXXXX* открываем файл *llm.php* на редактирование. 
* В классе *LLM_client* изменяем свойство *_debug* на *true* (по умолчанию оно равно *false*). 
* Удаляем файл *llm-links.txt*, если он есть.
* Обновляем страницу и смотрим текст выдаваемой ошибки:
** _Cannot touch XXX_ - проблема в правах доступа на файл *llm-links.txt*
** _XXX is unwriteable_ - проблема снова в правах доступа.
** _NULL answer from llm-client_ - скорее всего проблема в том, что скрипт вообще не может соединиться со скриптом, раздающим ссылки, узнайте включены ли исходящие соединения. Так же проверьте - а правильно ли указан адрес основного домена, его легко можно подсмотреть в самом начале скрипта: переменные $_llm_main_host и $_llm_main_uri.
** _llm-client send error XXX_ - проверьте: не модифицировался ли код получения ссылки, возможно вы допустили ошибку в ключе домена (константа *_LLM_DOMAIN_KEY*)
** _Write function return NULL_ - недостаточно прав для записи в файл *llm-links.txt*
** _Cannot read XXX_ - ошибка в правах доступа на *llm-links.txt*
** _Links file is not an array_ - скрипт не может прочитать файл со ссылками. Возможно он поврежден и не содержит правильно сериализованный массив ссылок.

h2. Изменение способа получения ссылок

Если по каким-то причинам вам надо изменить способ получения ссылок, то для этого надо исправить свойство *_fetch_remote_type* класса *LLM_client*. Возможные значения:
* *file_get_contents* - встроенная в PHP функция, подойдет для большинства хостингов
* *curl* - для соединения используется библиотека CURL
* *socket* - использование сокетов (не рекомендуется в принципе)

h2. Если ссылки надо вставить в разные части сайта

Для этого надо немного модифицировать сгенерированный код. Вставить в самое начало код:

<pre><?php 
     if (!defined('_LLM_DOMAIN_KEY')){
        define('_LLM_DOMAIN_KEY', 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'); 
     }
     require_once($_SERVER['DOCUMENT_ROOT'].'/llm-'._LLM_DOMAIN_KEY.'/llm.php'); 
     $llm = new LLM_client();
?>
</pre>

А далее в каждом месте простановки ссылок вызвать следующий код:

<pre><?PHP echo $llm->return_links(2); ?> разделитель-разделитель-разделитель <?PHP echo $llm->return_links(1); ?></pre>
