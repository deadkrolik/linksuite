h2. Общее описание

Статичный код - это принятое в системе общее название некого определяемого пользователем кода, который показыватеся на всех страницах сайта (везде, где указан специальный код). Может быть полезен для управления из одного места кодом кликнадеров, попандеров, скозных ссылок, баннероферм, iframe, счетчиков и всего прочего, что необходимо показывать не как ссылки только на конкретных страницах, а на всех, где это возможно.

В обычном варианте сложностей не возникает. Тот же счетчик вставляется в шаблон и автоматом отрисовывается везде, где только можно. Но если необходимо именно управление кодом (периодическое выключение, изменение), то данный функционал скрипта будет востребован.

h2. Из чего состоит код

Попасть в модуль управления кодом можно через субменю в глобальном пункте меню Сайты - "Управление статичным кодом". В общем случае тут выводится список кодов. Нажав на ссылку в субменю "Добавить код" вы переходите к форме добавления кода. Каждый код это:

* Имя - просто описание, например "сквозняк от партнера 1" или "кликандер от clickunder.ru"
* Имя позиции - на каждом сайте можно сделать несколько самостоятельных блоков, которые называются позиции и в которых можно выводить различный код. Причем имя позиции на одном сайте может совпадать с именем на другом, даже не может, а должно совпадать, если они находятся в одинаковых по визуальному расположению местах. Имя может быть любым, но лучше избегать спец. символов и прочих не английских букв. Идеально, если они будут называться footer, header и проч. И логично, если их наименование будет предопределено логикой расположения.
* Опубликовано - включено ли к показу.
* На каких сайтах публиковать - дополнительно к указанию позиции (что уже дает один уровень управления кодом, на каких-то сайтах какую-то позицию можно просто не прописывать) можно указать где показывать определенный код. Может быть востребовано, если на каком-то сайте код надо временно выключиь, при этом не выключая его на других сайтах.

h2. Управление позициями

Позиции - это просто текстовый файл */data/positions.txt*. На каждой строке хранится имя каждой позиции. Не желательно менять имена после размещения какого-то кода, они просто перестанут работать.

h2. Размещение кода

Как и размещение ссылок, размещение кода требует включения в шаблон некоторых инструкций. Каждая инструкция должна идти после стандартного кода:

<pre>
<?php 
     if (!defined('_LLM_DOMAIN_KEY')){
        define('_LLM_DOMAIN_KEY', 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'); 
     }
     require_once($_SERVER['DOCUMENT_ROOT'].'/llm-'._LLM_DOMAIN_KEY.'/llm.php'); 
     $llm = new LLM_client();
?>
</pre>

После инициализации объекта $llm (если прописать ДО - ничего работать не будет) надо написать следующий код:

<pre>
<?php
echo $llm->return_static('footer');
?>
</pre>

Где *footer* - имя позиции, на которую присвоен (или еще не присвоен) какой-то код. В общем случае на одной позиции может быть несколько статичных кодов. При выводе они просто объединятся друг с другом.

h2. Обновление

Если вы обновили скрипт с предыдущих версий, то надо заново сгенерировать архив для сайта, иначе назначенный код отображаться не будет, а скрипт в общем случае будет уведомлять вас об отсутствии функции *return_static*.